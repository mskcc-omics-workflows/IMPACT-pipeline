## BCL2FASTQ

#### Description:

This is a module to use bcl2fastq2.20 developed by Illumina to demultiplex sequencing runs.

#### Usage:

Inputs:

- Meta map to contain metadata of run, including run name, base mask, and mismatch
- SampleSheet.csv
- Location of the run folder
- Output location of demultiplexing

Outputs:

- Fastq files for each sample
- Undetermined fastq files
- Reports ans Stats generated by bcl2fastq tool

Testing/Example:

```
nextflow run tests/main.nf -profile docker
```

#### Note

This module cannot be run on local machine due to the requirements of bcl2fastq: 4 cores, at least 16GB per core.

#### Docker image build

1. Download bcl2fastq2 from Illumina
2. run ` rpm2cpio bcl2fastq2-v2.20.0.422-Linux-x86_64.rpm | cpio -i --make-directories`
3. docker build -t mpathdms/bcl2fastq:2.20.0.422 .
4. docker push mpathdms/bcl2fastq:2.20.0.422

#### References

_Archer/Archer-heme_

/usr/local/bin/bcl2fastq -R /dmp/dms/raw-data/illumina/miseq/MISEQ11/MiSeqOutput/220726_M07206_0107_000000000-KGBL6 -o /dmp/dms/raw-data/illumina/miseq/MISEQ11/MiSeqOutput/220726_M07206_0107_000000000-KGBL6/CASAVA_Processing --barcode-mismatches 1 -r 8 -w 8 --sample-sheet /dmp/dms/raw-data/illumina/miseq/MISEQ11/MiSeqOutput/220726_M07206_0107_000000000-KGBL6/SampleSheet.csv --use-bases-mask y151,i8,i8,y151 --ignore-missing-bcls --ignore-missing-filter --ignore-missing-positions --ignore-missing-controls

_ACCESS_

/usr/local/bin/bcl2fastq -R /dmp/dms/raw-data/illumina/novaseq/NOVASEQ03/220728_A00996_0291_AHH7Y7DRX2 -o /dmp/dms/raw-data/illumina/novaseq/NOVASEQ03/220728_A00996_0291_AHH7Y7DRX2/CASAVA_Processing --barcode-mismatches 1 -r 8 -w 8 --sample-sheet /dmp/dms/raw-data/illumina/novaseq/NOVASEQ03/220728_A00996_0291_AHH7Y7DRX2/SampleSheet.csv --use-bases-mask y101,i8,i8,y101 --no-lane-splitting --ignore-missing-bcls --ignore-missing-filter --ignore-missing-positions --ignore-missing-controls

_IMPACT/IMPACT-heme_

/usr/local/bin/bcl2fastq -R /dmp/dms/raw-data/illumina/novaseq/NOVASEQ01/220727_A00388_0417_BHFK53DRX2 -o /dmp/dms/raw-data/illumina/novaseq/NOVASEQ01/220727_A00388_0417_BHFK53DRX2/CASAVA_Processing --barcode-mismatches 0 -r 8 -w 8 --sample-sheet /dmp/dms/raw-data/illumina/novaseq/NOVASEQ01/220727_A00388_0417_BHFK53DRX2/SampleSheet.csv --use-bases-mask y101,i8,i8,y101 --ignore-missing-bcls --ignore-missing-filter --ignore-missing-positions --ignore-missing-controls
